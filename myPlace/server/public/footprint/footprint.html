<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="stylesheet" href="/css/bootstrap.css"/>
	<link rel="stylesheet" href="/css/font-awesome.min.css"/>
	<link rel="stylesheet" href="/css/custom.css"/>
	<title>footprint.html</title>
	<style>
		td:hover{
			background-color: white !important;
		}
		td{
			cursor:auto !important;
		}
		.wrapper{
			position: relative;
		}
		.wrapper img{
			position: absolute;
			pointer-events: none;
		}
	</style>
</head>
<body>
<!-- 윗단을 만들어 봅시다. -->
<div class="navbar navbar-default navbar-fixed-top navbgcolor">
	<div class="navbar-header navbgcolor">
		<a href="/index.html" class="navbar-brand nav-font navbgcolor" style="font-size:30px">To The MooN</a>
		<button class="navbar-toggle navbgcolor" data-toggle="collapse" data-target="#spread">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
	</div>
	<div class="collapse navbar-collapse  navbgcolor" id="spread">
		<!-- 네비게이션 요소 -->
		<ul class="nav navbar-nav" id="menuposition">
			<li><a href="../index.html" class="nav-font">HoMe</a></li>
			<li><a href="/howtocome/howtocome.html" class="nav-font">How To Come</a></li>
			<li><a href="/Monthdiary/monthdiary.html" class="nav-font">Month Diary</a></li>
			<li><a href="/footprint/footprint.html" class="nav-font active">FooT PrinT</a></li>
			<a href="#" class="btn btn-success" id="loginBtn">LogIn</a>
		</ul>
	</div>
</div>
<!-- 요기까지 윗단입니다. -->


<!-- main frame -->
<div class="wrapper">
	<div id="main">
		<div style="width:150px; height:100%;"></div>
		<div style="border:1px; width:400px; height:150px;  margin: 100px auto 0px auto;" >
			<table>
				<tr>
					<td>
						<textarea name="textarea" id="textmessage" cols="30" rows="10" style="height:100px; width:400px;font-family: 'Nanum Pen Script', cursive;font-size: 30px;border:1px dotted skyblue"></textarea>
					</td>
				</tr>
				<tr>
					<td align="right">
						<input type="button" id="btnmessage" class="btn btn-default" value="작성"/>
					</td>
				</tr>
			</table>
			<div id="content" style="width:400px;"></div>
		</div>
	</div>
</div>


<!-- 로그인 모달 -->
<div class="modal fade" id="loginModal">
	<!-- modal-lg  | default | modal-sm -->	
  <div class="modal-dialog modal-md">
    <div class="modal-content" style="background-color: white">
      <div class="modal-header">
        <button type="button" class="close glyphicon glyphicon-remove" data-dismiss="modal"><span class="sr-only">모달 닫기</span></button>
        <h2 class="modal-title" style="font-family: 'Nanum Pen Script', cursive; font-size:50px">로그인 하기</h2>
      </div>
      <div class="modal-body">
		<h3>폼 validation 테스트</h3>
		<form action="submit" id="myForm">
			<div class="form-group has-feedback">
				<label for="id" class="control-label">아이디</label>
				<input type="text" id="id" class="form-control"/>
				<span class="glyphicon glyphicon-ok form-control-feedback"></span>
				<p class="help-block">첫글자는 소문자, 특수문자 허용 안함, 5~10 이내로 입력</p>
			</div>
			<div class="form-group has-feedback">
				<label for="email" class="control-label">이메일</label>
				<input type="text" id="email" class="form-control"/>
				<span class="glyphicon form-control-feedback"></span>
				<p class="help-block">이메일 형식에 맞게 입력</p>
			</div>
			<div style="text-align: right">
			<button type="submit" class="btn btn-success" id=login>로그인</button>
			<button type="submit" class="btn btn-danger" id="joinBtn">회원가입</button>
			</div>
		</form>
      </div>
      <div class="modal-footer">
		<div class="container">
			GooD
		</div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- 로그인 모달 종료 -->

<!-- 회원가입 모달 -->
<div class="modal fade" id="joinModal">
	<!-- modal-lg  | default | modal-sm -->	
  <div class="modal-dialog modal-md">
    <div class="modal-content" style="background-color: white">
      <div class="modal-header">
        <button type="button" class="close glyphicon glyphicon-remove" data-dismiss="modal"><span class="sr-only">모달 닫기</span></button>
        <h2 class="modal-title" style="font-family: 'Nanum Pen Script', cursive; font-size:50px">회원 가입</h2>
      </div>
      <div class="modal-body">
			<h1>회원가입 안받아요</h1>
			<img src="/images/org.jpg" alt="">
			<p>절대 귀찮아서가 아니다.</p>
      </div>
      <div class="modal-footer">
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- 회원가입 모달 종료 -->


<script src="/js/jquery-3.2.0.js"></script>
<script src="/js/bootstrap.js"></script>	
<script type="text/javascript">
	$(document).ready(function(){
		$("#btnmessage").click(function(){
			var message = $("#textmessage").val();
			var date = new Date();
			var htmls;
			$("<div/>").load("message.html",function(data){
				var $htmldata = $(data);
				$htmldata.find("#messagebox").html(message);
				$htmldata.find("#datebox").text(date);
				var datas = $htmldata.html();
				$("#content").prepend(datas);
			});
		});
	});

	$(document).on("click","#remessage",function(){
		if($("#re_txt")){
			$("#re_txt").parent().children().remove();
		}
		$(this).parent().parent().append(
			"<dl><input id='re_txt' type='text'/><span><input id='btn_re' type='button' value='작성'/></span></dl>");
	});

	$(document).on("click","#btn_re",function(){
		var $remessage=$(this).parent().parent();
		var remessage = $remessage.find("#re_txt").val();
		$remessage.children().remove();
		$remessage.parent().append("<dl id='bubu' style='border-bottom:solid; border-bottom-width:1px; overflow-x:hidden; background-color:lightgrey;'><span>"+remessage+"</span></dl>")
	});
</script>
<script>


	$("#btnmessage").click(function(){
		var footprintX = Math.floor(Math.random()*800);
		var footprintY = Math.floor(Math.random()*700);	
		var size = Math.floor(Math.random()*20);
		$("<img/>")
		.css("position","absolute")
		.css("left",footprintX+"px")
		.css("top",footprintY+"px")
		.css("opacity",0.5)
		.css("width",size+"%")
		.attr("src","/images/footprint1.png")
		.attr("id","footprint")
		.appendTo(".wrapper");
	});



</script>


<script>







	$("#loginBtn").on("click",function(){
		$("#loginModal").modal("show");
	});
	$("#joinBtn").on("click",function(){
		$("#loginModal").modal("hide");
		$("#joinModal").modal("show");
	});
	$("#login").on("click",function(){
		$("#loginModal").modal("hide");
	});

//등록 했는지 안했는지 상태값을 변경해야 되지않으까?
	//아이디 검증 통과 여부
	var isIdValid=false;
	//이메일 검증 통과 여부
	var isEmailValid=false;

$("#email").keyup(function(){
	//입력한 아이디를 읽어온다.
	var inputEmail=$("#email").val();
	//ajax 통신을 이용해서 서버에 보낸다.
	$.ajax({
		url:"/ajax/test06EMAIL",
		method:"get",
		data:{inputEmail:inputEmail},
		success:function(data){
			//data는 {canUse:true} or {canUse:false} 오브젝트
			if(data.canUse){
				$("#checkResult").text("사용가능");
				makeSuccess($("#email"));				
				isEmailValid=true;
			}else{
				$("#checkResult").text("사용불가");
				makeError($("#email"));				
				isEmailValid=false;
			}
			changeButtonState();
		}
	});
});

$("#id").keyup(function(){
	//입력한 아이디를 읽어온다.
	var inputId=$("#id").val();
	//ajax 통신을 이용해서 서버에 보낸다.
	$.ajax({
		url:"/ajax/test06ID",
		method:"get",
		data:{inputId:inputId},
		success:function(data){
			//data는 {canUse:true} or {canUse:false} 오브젝트
			if(data.canUse){
				$("#checkResult").text("사용가능");
				makeSuccess($("#id"));				
				isIdValid=true;
			}else{
				$("#checkResult").text("사용불가");
				makeError($("#id"));				
				isIdValid=false;
			}
			changeButtonState();
		}
	});
});


	//폼전송이벤트가 일어났을때 실행할 함수 등록
$("#myForm").on("submit", function(){

	if(!isIdValid||!isEmailValid){//아이디 중복 확인 하지 않았으면
		//폼전송막기
		return false;
	}
});

//-----------------------------------------------------

	//전송 버튼의 상태를 바꾸는 함수 
	function changeButtonState(){
		if(isIdValid && isEmailValid){
			$("#myForm [type=submit]")
			.removeAttr("disabled");
		}else{
			$("#myForm [type=submit]")
			.attr("disabled","disabled");
		}
	}

	//성공 상태를 나타 내주는 함수 
	function makeSuccess($elem){
		$elem
		.next()
		.removeClass("glyphicon-remove")
		.addClass("glyphicon-ok")
		.show()
		.parent()
		.removeClass("has-error")
		.addClass("has-success")
		.find(".help-block")
		.hide();
	}
	//실패 상태를 나타 내주는 함수  
	function makeError($elem){
		$elem
		.next()
		.removeClass("glyphicon-ok")
		.addClass("glyphicon-remove")
		.show()
		.parent()
		.removeClass("has-success")
		.addClass("has-error")
		.find(".help-block")
		.show();
	}




</script>

	
</body>
</html>