<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<link rel="stylesheet" href="/css/bootstrap.css"/>
	<link rel="stylesheet" href="/css/font-awesome.min.css"/>
	<link rel="stylesheet" href="/css/custom.css"/>
	<title>howtocome.html</title>
</head>
<body>
<!-- 윗단을 만들어 봅시다. -->
<div class="navbar navbar-default navbar-fixed-top navbgcolor">
	<div class="navbar-header navbgcolor">
		<a href="/index.html" class="navbar-brand nav-font navbgcolor" style="font-size:30px">To The Moon</a>
		<button class="navbar-toggle navbgcolor" data-toggle="collapse" data-target="#spread">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
	</div>
	<div class="collapse navbar-collapse  navbgcolor" id="spread">
		<!-- 네비게이션 요소 -->
		<ul class="nav navbar-nav" id="menuposition">
			<li><a href="../index.html" class="nav-font">HoMe</a></li>
			<li><a href="/howtocome/howtocome.html" class="nav-font active">How To Come</a></li>
			<li><a href="/Monthdiary/monthdiary.html" class="nav-font">Month Diary</a></li>
			<li><a href="/footprint/footprint.html" class="nav-font">FooT PrinT</a></li>
			<a href="#" class="btn btn-success" id="loginBtn">LogIn</a>
		</ul>
	</div>
</div>
<!-- 요기까지 윗단입니다. -->

<!-- main frame -->
<div class="container">
	<div class="col-xs-12">
	  	<h1>서식지</h1>
		<div id="map" style="width:100%;height:450px;"></div>
	</div>
	<div class="container" style="text-align:center !important">
		<a id="mapBtn" class="btn btn-success" href="http://map.daum.net/link/to/문병우 서식지,37.608874, 127.136813">찾아가는 길</a>
	</div>
</div>


<!-- 로그인 모달 -->
<div class="modal fade" id="loginModal">
	<!-- modal-lg  | default | modal-sm -->	
  <div class="modal-dialog modal-md">
    <div class="modal-content" style="background-color: white">
      <div class="modal-header">
        <button type="button" class="close glyphicon glyphicon-remove" data-dismiss="modal"><span class="sr-only">모달 닫기</span></button>
        <h2 class="modal-title" style="font-family: 'Nanum Pen Script', cursive; font-size:50px">로그인 하기</h2>
      </div>
      <div class="modal-body">
		<h3>폼 validation 테스트</h3>
		<form action="submit" id="myForm">
			<div class="form-group has-feedback">
				<label for="id" class="control-label">아이디</label>
				<input type="text" id="id" class="form-control"/>
				<span class="glyphicon glyphicon-ok form-control-feedback"></span>
				<p class="help-block">첫글자는 소문자, 특수문자 허용 안함, 5~10 이내로 입력</p>
			</div>
			<div class="form-group has-feedback">
				<label for="email" class="control-label">이메일</label>
				<input type="text" id="email" class="form-control"/>
				<span class="glyphicon form-control-feedback"></span>
				<p class="help-block">이메일 형식에 맞게 입력</p>
			</div>
			<div style="text-align: right">
			<button type="submit" class="btn btn-success" id=login>로그인</button>
			<button type="submit" class="btn btn-danger" id="joinBtn">회원가입</button>
			</div>
		</form>
      </div>
      <div class="modal-footer">
		<div class="container">
			GooD
		</div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- 로그인 모달 종료 -->

<!-- 회원가입 모달 -->
<div class="modal fade" id="joinModal">
	<!-- modal-lg  | default | modal-sm -->	
  <div class="modal-dialog modal-md">
    <div class="modal-content" style="background-color: white">
      <div class="modal-header">
        <button type="button" class="close glyphicon glyphicon-remove" data-dismiss="modal"><span class="sr-only">모달 닫기</span></button>
        <h2 class="modal-title" style="font-family: 'Nanum Pen Script', cursive; font-size:50px">회원 가입</h2>
      </div>
      <div class="modal-body">
			<h1>회원가입 안받아요</h1>
			<img src="/images/org.jpg" alt="">
			<p>절대 귀찮아서가 아니다.</p>
      </div>
      <div class="modal-footer">
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- 회원가입 모달 종료 -->

<script src="/js/jquery-3.2.0.js"></script>
<script src="/js/bootstrap.js"></script>	
<script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=5b3552a9479d0620a8da41263082b1d9&libraries=services"></script>


<script>
	// //위도 경도를 저장할 변수 
	// var lat=0;
	// var lon=0;

	// //위치정보를 확인할수 있는 기기인지 확인한다.
	// if(navigator.geolocation == undefined){
	// 	alert("위치 정보 기능을 지원하지 않습니다.");
	// }
	// //버튼을 눌렀을때 실행할 함수 등록
	// $("#locBtn").click(function(){
	// 	//현재 위치 정보를 조사하고 성공, 실패 했을때 호출되는 함수 등록 
	// 	navigator.geolocation
	// 	.getCurrentPosition(function(position){
	// 		//위도 읽어오기
	// 		lat=position.coords.latitude;
	// 		//경도 읽어오기
	// 		lon=position.coords.longitude;
	// 		//출력하기
	// 		var info="위도:"+lat+" 경도:"+lon;
	// 		$("#myConsole").text(info);
	// 	}, function(err){
	// 		$("#myConsole").text(err);
	// 	});

	// });


	// $("#mapBtn").click(function(){
	// 	var url="http://maps.google.com/?q="+lat+","+lon;
	// 	//이동하기 
	// 	location.href=url;
	// });

//다음 맵 그리기
		// var container = document.getElementById('map');
		// var options = {
		// 	center: new daum.maps.LatLng(37.608874, 127.136813),
		// 	level: 3
		// };

		// var map = new daum.maps.Map(container, options);

var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = {
        center: new daum.maps.LatLng(37.608874, 127.136813), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };  

// 지도를 생성합니다    
var map = new daum.maps.Map(mapContainer, mapOption); 

// 주소-좌표 변환 객체를 생성합니다
var geocoder = new daum.maps.services.Geocoder();

// 주소로 좌표를 검색합니다
geocoder.addr2coord('경기도 구리시 동구릉로 114', function(status, result) {

    // 정상적으로 검색이 완료됐으면 
     if (status === daum.maps.services.Status.OK) {

        var coords = new daum.maps.LatLng(result.addr[0].lat, result.addr[0].lng);

        // 결과값으로 받은 위치를 마커로 표시합니다
        var marker = new daum.maps.Marker({
            map: map,
            position: coords
        });

        // 인포윈도우로 장소에 대한 설명을 표시합니다
        var infowindow = new daum.maps.InfoWindow({
            content: '<div style="width:150px;text-align:center;padding:6px 0;">살기 좋은 구리시</div>'
        });
        infowindow.open(map, marker);

        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
        map.setCenter(coords);
    } 
});    

	$("#loginBtn").on("click",function(){
		$("#loginModal").modal("show");
	});
	$("#joinBtn").on("click",function(){
		$("#loginModal").modal("hide");
		$("#joinModal").modal("show");
	});
	$("#login").on("click",function(){
		$("#loginModal").modal("hide");
	});

//등록 했는지 안했는지 상태값을 변경해야 되지않으까?
	//아이디 검증 통과 여부
	var isIdValid=false;
	//이메일 검증 통과 여부
	var isEmailValid=false;

$("#email").keyup(function(){
	//입력한 아이디를 읽어온다.
	var inputEmail=$("#email").val();
	//ajax 통신을 이용해서 서버에 보낸다.
	$.ajax({
		url:"/ajax/test06EMAIL",
		method:"get",
		data:{inputEmail:inputEmail},
		success:function(data){
			//data는 {canUse:true} or {canUse:false} 오브젝트
			if(data.canUse){
				$("#checkResult").text("사용가능");
				makeSuccess($("#email"));				
				isEmailValid=true;
			}else{
				$("#checkResult").text("사용불가");
				makeError($("#email"));				
				isEmailValid=false;
			}
			changeButtonState();
		}
	});
});

$("#id").keyup(function(){
	//입력한 아이디를 읽어온다.
	var inputId=$("#id").val();
	//ajax 통신을 이용해서 서버에 보낸다.
	$.ajax({
		url:"/ajax/test06ID",
		method:"get",
		data:{inputId:inputId},
		success:function(data){
			//data는 {canUse:true} or {canUse:false} 오브젝트
			if(data.canUse){
				$("#checkResult").text("사용가능");
				makeSuccess($("#id"));				
				isIdValid=true;
			}else{
				$("#checkResult").text("사용불가");
				makeError($("#id"));				
				isIdValid=false;
			}
			changeButtonState();
		}
	});
});


	//폼전송이벤트가 일어났을때 실행할 함수 등록
$("#myForm").on("submit", function(){

	if(!isIdValid||!isEmailValid){//아이디 중복 확인 하지 않았으면
		//폼전송막기
		return false;
	}
});

//-----------------------------------------------------

	//전송 버튼의 상태를 바꾸는 함수 
	function changeButtonState(){
		if(isIdValid && isEmailValid){
			$("#myForm [type=submit]")
			.removeAttr("disabled");
		}else{
			$("#myForm [type=submit]")
			.attr("disabled","disabled");
		}
	}

	//성공 상태를 나타 내주는 함수 
	function makeSuccess($elem){
		$elem
		.next()
		.removeClass("glyphicon-remove")
		.addClass("glyphicon-ok")
		.show()
		.parent()
		.removeClass("has-error")
		.addClass("has-success")
		.find(".help-block")
		.hide();
	}
	//실패 상태를 나타 내주는 함수  
	function makeError($elem){
		$elem
		.next()
		.removeClass("glyphicon-ok")
		.addClass("glyphicon-remove")
		.show()
		.parent()
		.removeClass("has-success")
		.addClass("has-error")
		.find(".help-block")
		.show();
	}



</script>

	
</body>
</html>